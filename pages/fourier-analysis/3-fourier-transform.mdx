import FrameMafs from '../../components/FrameMafs.tsx'
import WaveSummationInverted from '../../components/WaveSummationInverted.tsx'
import FixedWaveSummation from '../../components/FixedWaveSummation.tsx'
import WaveCheck from '../../components/WaveCheck.tsx'
import ProductIntegral from '../../components/FixedProductIntegral.tsx'
import DynamicProductIntegral from '../../components/DynamicProductIntegral.tsx'
import QuestionAnswer, { Answer } from '../../components/QuestionAnswer.tsx'
import { Callout } from 'nextra-theme-docs'
import {
  CartesianCoordinates,
  Mafs,
  FunctionGraph,
  Text,
  Point,
  Line,
} from '../../mafs/'
import { NonSVGWrapper, NonSVG } from '../../mafs/display/NonSVGElements'

# Fourier-Transformation

## Verallgemeinerung der Fourier-Reihe

Im Abschnitt √ºber die [Fourier-Reihe](./2-fourier-series), wurde die **Fourier-Reihe** hergeleitet.

Dabei l√§sst sich zwischen der **Fourier-Reihe** zur **Synthese** einer Funktion $f(t)$, wenn die **Koeffizienten** $c_k$ bekannt sind,

$$
f(t) = \sum_{k=-\infty}^{\infty} c_k e^{\frac{2 \pi i}{T} k t }
$$

und der **Analyse** einer Funktion $f(t)$, bzw. das _Herausfinden_ der **Fourier-Koeffizienten** unterscheiden:

$$
c_k = \frac{1}{T}\int_0^{T} f(t) e^{\frac{-2 \pi i k}{T} t} dt
$$

---

Es gibt also zwei Vorgehensweisen, welche bis jetzt bekannt sind:

- **Fourier-Analyse** einer Funktion $f(t)$ (das _Zerlegen_ in die Koeffizienten)
- **Fourier-Synthese** einer Funktion $f(t)$ (das _Wiederherstellen_ √ºber bekannte Koeffizienten)

Beide Vorgehensweisen lassen sich auch f√ºr nicht-periodische Funktionen verallgemeinern.
Die Verallgemeinerung der **Fourier-Analyse** ist dabei die **Fourier-Transformation** und die Verallgemeinerung der **Fourier-Synthese** die **Inverse-Fourier-Transformation**.

### Frequenzraum vs. Zeitraum

Die verschiedenen **Fourier-Koeffizienten** lassen sich darstellen. Im sogenannte **Frequenzraum** werden die **Betr√§ge** der Koeffizienten gegen die zugeh√∂rigen Frequenzen aufgetragen. Es ist relevant, den Betrag zu nehmen, da es sich bei den Koeffizienten um [komplexe Zahlen](../appendix/complex-numbers/1-complex-plane) handelt.

Dies k√∂nnte z.B. so aussehen:

<FrameMafs>
  <Mafs pan={false} yAxisExtent={[-1, 4]}>
    <CartesianCoordinates xAxis={{ labels: false }} />
    <Point x={2} y={2} />
    <Line.Segment style="dashed" point1={[2, 0]} point2={[2, 2]} />
    <Point x={-2} y={2} />
    <Line.Segment style="dashed" point1={[-2, 0]} point2={[-2, 2]} />
    <Point x={0} y={0.2} />
    <Line.Segment style="dashed" point1={[0, 0]} point2={[0, 0.2]} />
    <Point x={1} y={1.2} />
    <Line.Segment style="dashed" point1={[1, 0]} point2={[1, 1.2]} />
    <Point x={-1} y={1.2} />
    <Line.Segment style="dashed" point1={[-1, 0]} point2={[-1, 1.2]} />
    <Point x={3} y={0} />
    <Point x={-3} y={0} />
    <Point x={4} y={3} />
    <Line.Segment style="dashed" point1={[4, 0]} point2={[4, 3]} />
    <Point x={-4} y={3} />
    <Line.Segment style="dashed" point1={[-4, 0]} point2={[-4, 3]} />
    <Point x={5} y={1} />
    <Line.Segment style="dashed" point1={[5, 0]} point2={[5, 1]} />
    <Point x={-5} y={1} />
    <Line.Segment style="dashed" point1={[-5, 0]} point2={[-5, 1]} />
  </Mafs>
</FrameMafs>

Diese Darstellung wird auch **Frequenzspektrum** genannt.

<QuestionAnswer>
  <>Welche Eigenschaft ist bei obiger **Fourier-Reihe** erf√ºllt?</>
  <Answer correct={true}>F√ºr $c_k$ mit $k<0$ gilt $c_k = \overline{c}_{-k}$</Answer>
  <Answer> Es gilt $n=4$  </Answer>
</QuestionAnswer>

Im **Frequenzraum** lassen sich also die Beitr√§ge der verschiedenen Frequenzen betrachten. Wichtig ist, dass der Abstand auf der horizontalen Achse jeweils $\frac{1}{T}$ entspricht.
Im **Zeitraum**, was der Darstellung des Signals in Abh√§ngigkeit der Zeit bedeutet, folgt:

<FrameMafs>
  <Mafs pan={false} xAxisExtent={[-3, 3]}>
    <FunctionGraph.OfX
      y={(x) =>
        0.2 +
        0.6 * Math.sin(Math.PI * x) +
        Math.sin(Math.PI * 2 * x) +
        1.5 * Math.sin(Math.PI * 4 * x) +
        0.5 * Math.sin(Math.PI * 5 * x)
      }
      quality="high"
    />
    <CartesianCoordinates xAxis={{ labels: (x) => 0.5 * x + 'T' }} />
  </Mafs>
</FrameMafs>

Dabei ist relevant, dass die Funktion nur **reelle** Funktionswerte, aufgrund der Eigenschaft der **kojugierten Komplexen Zahlen** $c_k$ und $c_{-k}$, annimmt.

Die dargestellte Funktion im **Zeit-** und **Frequnzraum** entspricht:

$$
 f(t) = 0.2+0.6\sin \left(2 \pi \frac{1}{T} t\right) + \sin \left(2 \pi \frac{2}{T} t\right) + 1.5 \sin \left(2 \pi \frac{4}{T} t\right) + 0.5 \sin \left(2 \pi \frac{5}{T} t\right)
$$

<QuestionAnswer>
  <>
    Was folgt f√ºr die Darstellung der Funktion im Frequenzraum, wenn $T$ gr√∂√üer
    wird?
  </>
  <Answer>Die Breite Frequenzspektrum √§ndert sich nicht</Answer>
  <Answer correct={true}>Das Frequenzspektrum wird schmaler</Answer>
  <Answer>Das Frequenzspektrum wird breiter</Answer>
</QuestionAnswer>

---

Dadurch, dass die Frequenz invers zur Periodendauer $T$ ist, folgt, dass wenn $T$ gr√∂√üer wird, die Frequenzen kleiner werden. Wenn man von der Idee einer _unendlichen_ Periodendauer ausgeht, r√ºcken die Frequenzen also _unendlich_ nah zusammen, da der Unterschied zwischen zwei Frequenzen im Frequenzspekturm wie beschrieben $\frac{1}{T}$ betr√§gt.
Das Verst√§ndis dieses **inversen** Zusammenhangs wird in Bezug auf eine _unendliche_ Periodendauer relevant: Je l√§nger die l√§nger die Periodendauer und somit _breiter_ der Zeitraum, desto _enger_ wird das Frequenzspektrum.

## Unendliche Periodendauer

Das Ziel ist es also, den Zusammenhang

$$
c_k = \frac{1}{T}\int_0^{T} f(t) e^{\frac{-2 \pi i k}{T} t} dt
$$

f√ºr $T\to \infty$ zu verallgemeinern um das Ganze auch auf nicht-periodische Funktionen anzuwenden.

F√ºr sp√§tere Zwecke wird das Integral mit den Grenzen $0$ und $T$ zu einem Integral mit den Grenzen $-\frac{T}{2}$ und $\frac{T}{2}$ ge√§ndert.
Da man lediglich den durchschnittlichen Wert innerhalb einer ganzen Periode berechnet, macht es keinen Unterschied, _wann_ diese Periode _stattfindet_.

F√ºr das Verst√§ndis ist es wom√∂glich n√ºtzlich nochmal auf die Interpretation dieses Integrals zur√ºckzublicken:

- Durch die Multiplikation mit $e^{\frac{-2 \pi i k}{T} t}$ wird die Rotation mit einer Frequenz von $\frac{k}{T}$ sozusagen von allen Zeigern _subtrahiert_.
- Dadurch ist es sicher, dass alle Zeiger rotieren, au√üer jener, welcher zuvor mit einer Frequenz von $\frac{k}{T}$ rotierte.
- Der durchschnittliche Wert der Funktion multipliziert mit $e^{\frac{-2 \pi i k}{T} t}$ entspricht also dem Wert $c_k$


### Problem mit den Koeffizienten

Es ergibt sich jedoch ein Problem. Wenn man den Durchschnitt der Funktion $f(t) \cdot e^{\frac{-2 \pi i k}{T} t}$ berechnet, 

## Probleme beim Umkehren

M√∂chte man von einer √ºberlagerten Funktion auf die urspr√ºnglichen Anteilen zur√ºckschlie√üen ist das erstmal ziemlich schwierig.
Probiere es doch mal selbst aus.

<WaveSummationInverted
  fixedCoordinates={[
    [2, 3],
    [0.5, 0.2],
    [1, 1],
    [5, 2],
    [7, 1],
    [0.1, 0.05],
  ]}
/>

Wie du wahrscheinlich merkst, ist es ganz sch√∂n schwierig eine passende Zusammensetzung von Sinuskurven zu finden. Selbst wenn du wei√üt, dass sich die Funktion aus 6 Sinuskurven zusammensetzt ist es praktisch unm√∂glich Sinuskurven zu finden, die summiert die Funktion ergeben.

## √úbereinstimmung pr√ºfen

Lass uns das Beispiel erstmal etwas vereinfachen. Im folgenden Beispiel ist es sehr einfach passende Sinus-Anteile zu finden, die die gesuchte Funktion ausmachen:

<WaveSummationInverted fixedCoordinates={[[2, 3]]} />

Mit dem blo√üen Auge kann man in beiden Beispielen gut erkennen, ob die Funktionen √ºbereinstimmen.

Wie kann man dies jedoch mathematisch feststellen, um sich sicher zu sein, dass die Funktionen wirklich √ºbereinstimmen?

F√ºr die beiden Funktionen gilt:

$$
\color{red}{}f(t) = A \cdot sin(\omega_1 \cdot t)
$$

$$
\color{cyan}{}g(t) = B \cdot sin(\omega_2 \cdot t)
$$

Daf√ºr bildet man das Produkt der beiden Funktionen:

$$
\color{purple}{}p(t) = f(t) \cdot g(t) = A \cdot sin(\omega_1 \cdot t) \cdot B \cdot sin(\omega_2 \cdot t)
$$

### Integral mit Unendlich

Um nun zu √ºberpr√ºfen, ob die Periodendauern √ºbereinstimmen berechnet man das Integral von $\color{purple}{}p(t)$:

$$
A = \int_{-\infty}^{\infty} p(t) dt
$$

<Callout emoji="üí°">
  Genaugenommen notiert man hier nicht direkt die $\infty$-Symbole, sondern notiert diese wiefolgt als Grenzwert:
  $$
  A = \lim_{n\to \infty}\int_{-n}^{n} p(t) dt
  $$
  $$\lim_{n\to \infty}$$ bedeutet hierbei einfach, dass sich $n$ immer n√§her an $\infty$ n√§hert.
</Callout>

<Callout emoji="üí°">
  Ein Integral ($\int_{a}^{b} f(x) dx$) gibt die **Fl√§che** zwischen x-Achse und
  dem Graphen von $f(x)$ im Bereich von $a$ bis $b$ an. Dabei werden Fl√§chen
  oberhalb der x-Achse als positiv angesehen und Fl√§chen unterhalb als negativ.
</Callout>

<Callout type="info" emoji="üìö">
  Der obige Hinweis reicht f√ºr das Verst√§ndis dieses Artikels aus. Falls du
  jedoch mehr √ºber Integralrechnung erfahren m√∂chtest, schau dir doch mal diesen
  [Wikipedia-Artikel zu
  Integralen](https://de.wikipedia.org/wiki/Integralrechnung) an.
</Callout>

Ist das Integral $A$ gleich $0$, stimmen die Periodendauern nicht √ºberein. Anderenfalls stimmen die beiden √ºberein.
**Erkl√§rung**

<WaveCheck fixed_periodendauer={4} />
### Integral ohne Unendlich

Da es h√§ufig schwierig ist ein Integral von $-\infty$ bis $\infty$ zu berechnen, kann man zur Vereinfachung sehr gro√üe Grenzen nehmen,
da dies zur Ann√§herung ausreicht.

<Callout>
  Der numerische Wert ist hierbei nicht der einzige ausschlaggegebende Wert. Die _"Gr√∂√üe"_ der Grenzen h√§ngt auch von der Periodendauer der Schwingungen ab.

Beispiel:\
 Hat man eine Schwingung mit der Periodendauer $T_1=1$ umfassen die Grenzen von $-10$ bis $10$ 20 Perioden, was meist f√ºr die Auswertung ausreicht.
Sollte es sich im Gegensatz dazu, um eine Schwingung mit der Periodendauer $T_2=100$ handeln, w√ºrden die Grenzen zu klein sein, da nur ein sehr geringer Ausschnitt einer einzigen Periode betrachtet werden w√ºrde.

</Callout>

**Erkl√§rung**

**Wavecheck mit 1000**

In diesem Beispiel nehmen wir als Grenzen mal $-1000$ und $1000$ an.

$$
A = \int_{-1000}^{1000} p(t) dt
$$

<WaveCheck fixed_periodendauer={4} leftBound={-1000} rightBound={1000} />

F√ºhrt man diese Auswertung nun f√ºr alle Periodendauern durch und stellt diese in einem Diagramm dar, erh√§lt man einen Graphen, der einem die "Richtigkeit" der Periodendauer angibt.

<ProductIntegral
  lowerBound={-1000}
  upperBound={1000}
  maxX={10}
  omegaA={4}
  amplitudeA={1}
  amplitudeB={1}
/>

Dieser Graph ist allerdings nur sehr schwer zu bestimmen, da man das Integral f√ºr jeden Wert neu bestimmen muss und der Ausdruck sehr rechenaufw√§ndig ist. Dies ist dir vielleicht bereits beim Laden der Seite aufgefallen, da das Erstellen des Graphens bei langsameren Ger√§ten sehr viel Zeit in Anspruch nimmt.

Die L√ºcke bei $T=4$ entsteht dadurch, dass dort eine Division durch $0$ stattfindet, wodurch der Wert Unendlich gro√ü wird und eine Definitionsl√ºcke entsteht. Zur Verdeutlichung ist hier eine N√§herung der Einh√ºllenden in lila angezeigt.

<Callout type="info" emoji="üìö">
  Falls du wissen m√∂chtest, wie dieser Graph entstanden ist, kannst du dies im
  Anhang nachlesen: [Herleitung Integral f√ºr
  Fourier-Transformation](../appendix/other/integral-derivation) an.
</Callout>

### Anwendung

Mit einer einzigen Welle, ist die Periodendauer noch sehr einfach mit dem Auge abzulesen, weshalb sich der Aufwand nicht lohnt. Das wahre Potenzial der Fourier-Transformation entfaltet sich erst, wenn man komplexe Funktionen mit vielen Anteilen zerlegen m√∂chte.

Zum Beispiel die Funktion ganz zu Anfang dieses Eintrages.

Nochmal zu Erinnerung:

<FixedWaveSummation
  fixedCoordinates={[
    [2, 3],
    [0.5, 0.2],
    [1, 1],
    [5, 2],
    [7, 1],
    [0.1, 0.05],
  ]}
/>

<DynamicProductIntegral waveCoordinates={[
    [2, 3],
    [0.5, 0.2],
    [1, 1],
    [5, 2],
    [7, 1],
    [0.1, 0.05],
    
  ]}

lowerBound={-100}
upperBound={100}
step={0.5}
maxX={8.2}
minX={-0.2}

/>

Mithilfe dieser Kurve kann man nun die Einzelnen Periodendauern bestimmen. Diese sind in lila eingezeichnet.

### Bestimmung der Amplituden

Das war jetzt allerdings nur die halbe Miete, da man die Amplituden ebenfalls bestimmen m√∂chte.
